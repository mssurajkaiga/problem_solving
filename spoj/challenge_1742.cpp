#include <iostream>
#include <string>
#include <stdlib.h>
using namespace std;string c(""),l(0,32768);int k=0;void e(){cout<<"COMPILE ERROR";exit(0);}int run(int s,int v){int j;for(int i=s;i<v;i++)switch(c[i]){case'>':++k%=32768;break;case'<':if(--k<0)k=32767;break;case'+':if(++l[k]>255)l[k]=0;break;case'-':if(--l[k]<0)l[k]=255;break;case'.':cout<<l[k];break;case'[':for(j=i+1;c[j]!=']';j++);if(l[k]>0)run(i--+1,j);else i=j;break;case']':e();}}int main(){string b;int o=0,x=0,i;while(cin){b="";getline(cin,b);for(i=0;i<b.size();i++){if(b[i]=='%')b.resize(i);else b[i]=='['?o++:b[i]==']'?x++:0;}c.append(b);}if(o!=x)e();run(0,c.size());}