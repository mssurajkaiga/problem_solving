#include <iostream>
#include <string>
#include <stdlib.h>
using namespace std;string b,m(0,32768);int k=0;void e(){cout<<"COMPILE ERROR";exit(0);}void run(int q,int w){int j=0;for(int i=q;i<w;i++)switch(b[i]){case'>':++k%=32768;break;case'<':if(--k<0)k=32767;break;case'+':if(++m[k]>255)m[k]=0;break;case'-':if(--m[k]<0)m[k]=255;break;case'.':cout<<m[k];break;case'[':for(j=i+1;b[j]!=']';j++)if(j>=w)e();if(m[k]>0)run(i--+1,j);else i=j;break;case']':e();}}int main(){string t;int o=0,c=0;while(cin){t="";getline(cin,t);for(int i=0;i<t.size();i++){if(t[i]=='%'){t.resize(i);}else t[i]=='['?o++:t[i]==']'?c++:0;}b.append(t);}if(o!=c)e();run(0,b.size());}